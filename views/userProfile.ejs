<%- include('userHeader') %>

  <div class="hero-2" style="background-image: url('images/hero_2.jpg');">
    <div class="container">
      <div class="row justify-content-center text-center align-items-center">
        <div class="col-md-8">

          <h2>My Profile</h2>
        </div>
      </div>
    </div>
  </div>
  <div class="site-section bg-light">
    <div class="container">
      <div class="row">
        <div class="col-lg-12">
          <div class="section-title mb-5">
            <h2>My Profile</h2>
          </div>
          <form method="post">
            <div class="row">
              <div class="col-md-6 form-group">

                <label for="fname">Name</label>
                <input type="text" value="<%= Usercollection.name %>" id="fname" class="form-control form-control-lg"
                  disabled>
              </div>
              <div class="col-md-6 form-group">
                <label for="eaddress">Email Address</label>
                <input type="text" value="<%= Usercollection.email %>" id="eaddress"
                  class="form-control form-control-lg" disabled>
              </div>

            </div>
            <div class="row">

              <div class="col-md-6 form-group">
                <label for="tel">Tel. Number</label>
                <input type="text" value="<%= Usercollection.address[0]?Usercollection.address[0].mobile:""%>" id="tel"
                  class="form-control form-control-lg" disabled>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 form-group">
                <label for="tel">House Name</label>
                <input type="text" value="<%= Usercollection.address[0]?Usercollection.address[0].houseName:""%>"
                  id="tel" class="form-control form-control-lg" disabled>
              </div>
              <div class="col-md-6 form-group">
                <label for="tel">Street</label>
                <input type="text" value="<%= Usercollection.address[0]?Usercollection.address[0].street:""%>" id="tel"
                  class="form-control form-control-lg" disabled>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 form-group">
                <label for="tel">City</label>
                <input type="text" value="<%= Usercollection.address[0]?Usercollection.address[0].city:""%>" id="tel"
                  class="form-control form-control-lg" disabled>
              </div>
              <div class="col-md-6 form-group">
                <label for="tel">Pincode</label>
                <input type="text" value="<%= Usercollection.address[0]?Usercollection.address[0].pincode:""%>" id="tel"
                  class="form-control form-control-lg" disabled>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6 form-group">
                <label for="fname">State</label>
                <input type="text" value="<%= Usercollection.address[0]?Usercollection.address[0].state:"" %>"
                  id="fname" class="form-control form-control-lg" disabled>
              </div>

            </div>
            <div class="row">
              <div class="col-12">
                <a href="/editaddress" class="btn btn-primary py-3 px-5">Add Address</a>
                <a href="/wishlist" class=" btn btn-primary py-3 px-5">Wishlist</a>
                <a href="/resetPassword" class="btn btn-primary py-3 px-5">Change Password</a>
                <a href="/logout" class="btn btn-primary py-3 px-5">Logout</a>

              </div>
            </div>

            <div class="site-section site-section-sm site-blocks-1 border-0" data-aos="fade">
              <div class="container">
                <div class="row">
                  <% Usercollection.address.forEach((address, index)=> { %>
                    <div class="col-md-6 col-lg-4 d-lg-flex mb-4 mb-lg-0 pl-4" data-aos="fade-up" data-aos-delay>
                      <div class="icon mr-4 align-self-start">
                        <span class="icon-truck text-primary"></span>
                      </div>
                      <div class="text">
                        <h2 class="font-heading-serif">Address <%= index + 1 %>
                        </h2>
                        <%= address.houseName %>,
                          <%= address.street %>,
                            <%= address.city %>,
                              <%= address.pincode %>,
                                <%= address.state %>
                                  <br>


                                  <a class="edit-btnn text-left btn btn-primary"
                                    onclick="editAddress(<%= index %>)">Edit</a>

                                  <a class="edit-btnn text-left btn btn-primary"
                                    onclick="deleteAddress(<%= index %>)">Delete</a>


                      </div>
                    </div>
                    <% }) %>

                </div>
              </div>
            </div>

          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="container">
      <div class="row">
        <div class="col-12 text-center">
          <div class="social-icons">
            <a href="#"><span class="icon-facebook"></span></a>
            <a href="#"><span class="icon-twitter"></span></a>
            <a href="#"><span class="icon-youtube"></span></a>
            <a href="#"><span class="icon-instagram"></span></a>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <div class="copyright">
            <p>

              Copyright &copy;
              <script>document.write(new Date().getFullYear());</script> All rights reserved | This template is
              Designed <i class="icon-heart text-danger" aria-hidden="true"></i> by <a href="https://colorlib.com"
                target="_blank">by Paul Boby T</a>

            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
  </div>


  <div id="loader" class="show fullscreen"><svg class="circular" width="48px" height="48px">
      <circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee" />
      <circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10"
        stroke="#ff5e15" />
    </svg></div>
  <script src="js/jquery-3.3.1.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/jquery-ui.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/jquery.countdown.min.js"></script>
  <script src="js/bootstrap-datepicker.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.fancybox.min.js"></script>
  <script src="js/jquery.sticky.js"></script>
  <script src="js/jquery.mb.YTPlayer.min.js"></script>
  <script src="js/main.js"></script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-23581568-13');
  </script>
  <script defer src="https://static.cloudflareinsights.com/beacon.min.js/v84a3a4012de94ce1a686ba8c167c359c1696973893317"
    integrity="sha512-euoFGowhlaLqXsPWQ48qSkBSCFs3DPRyiwVu3FjR96cMPx+Fr+gpWRhIafcHwqwCqWS42RZhIudOvEI+Ckf6MA=="
    data-cf-beacon='{"rayId":"831badfbec2fa3da","b":1,"version":"2023.10.0","token":"cd0b4b3a733644fc843ef0b185f98241"}'
    crossorigin="anonymous"></script>
  <script>
    function editAddress(index) {
      console.log("Event triggered")

      window.location.href = `/editaddress?addressIndex=${index}`;
    }

    function deleteAddress(index) {
      console.log("Event triggered");


      const data = { addressIndex: index };


      fetch('/deleteAddress', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(data),
      })
        .then(response => {
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          return response.json();

        })
        .then(responseData => {

          console.log(responseData);
          window.location.reload();
        })
        .catch(error => {
          console.error('There was a problem with the fetch operation:', error);
        });
    }

  </script>
  </body>

  </html>